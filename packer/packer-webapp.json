{
    "variables": {
        "do_client_id": "", "do_api_key": "", "vm_name": "jtalks-webapp"
    },
    "builders": [
        {
            "type": "digitalocean",
            "client_id": "{{user `do_client_id`}}",
            "api_key": "{{user `do_api_key`}}",
            "droplet_name": "{{user `vm_name`}}",
            "snapshot_name": "{{user `vm_name`}}.{{isotime \"02-01-2006T15-04-05\"}}",
            "size": "512mb",
            "region": "ams2",
            "image": "ubuntu-12-04-x64"
        },
        {
            "type": "virtualbox-iso",
            "guest_os_type": "Ubuntu_64",
            "iso_url": "http://releases.ubuntu.com/12.04/ubuntu-12.04.5-server-amd64.iso",
            "iso_checksum": "769474248a3897f4865817446f9a4a53",
            "iso_checksum_type": "md5",
            "ssh_username": "ubuntu",
            "ssh_password": "ubuntu",
            "ssh_wait_timeout": "60s",
            "disk_size": "1000",
            "headless": "true",

            "shutdown_command": "echo 'packer' | sudo -S shutdown -P now"
        }
    ],
    "provisioners": [
        { "type": "file", "source": "./cookbooks-with-dependencies", "destination": "/tmp" },
        {
            "type": "chef-solo", "remote_cookbook_paths": ["/tmp/cookbooks-with-dependencies"],
            "run_list": ["apt", "python", "java", "ark", "nginx",
                "jtalks::cicd", "jtalks::webapps", "jtalks::nginx"]
        }
    ]
}